---
import Layout from '../../layouts/Layout.astro';
---

<Layout title="Living with the Ghost of Sam - Show Synopsis">
  <div class="synopsis-container">
    <!-- Floating Ghost Effect -->
    <div class="floating-ghost-container">
      <div class="ghost ghost-1"></div>
      <div class="ghost ghost-2"></div>
      <div class="ghost ghost-3"></div>
    </div>

    <header class="nav-header">
      <nav>
        <a href="/">Home</a>
        <a href="/characters">Characters</a>
        <a href="/episodes">Episodes</a>
        <a href="/docs">Documents</a>
        <a href="/gallery">Gallery</a>
      </nav>
    </header>

    <main>
      <div class="hero-section">
        <div class="parallax-layers">
          <div class="layer layer-1"></div>
          <div class="layer layer-2"></div>
          <div class="layer layer-3"></div>
        </div>
        <div class="hero-content">
          <h1 class="title">Living with the <span class="ghost-text">Ghost</span> of Sam</h1>
          <div class="subtitle-container">
            <p class="tagline">When artificial intelligence meets the supernatural... with a wicked sense of humor</p>
            <div class="accent-line"></div>
          </div>
        </div>
      </div>

      <section class="synopsis-content">
        <!-- Rest of your content remains the same -->
        <!-- ... -->
      </section>
    </main>
  </div>
</Layout>

<style>
  /* Base Styles */
  :root {
    --primary: #6E01EF;
    --secondary: #FF5722;
    --dark: #151515;
    --light: #f5f5f5;
    --accent: #00E5FF;
    --gradient-bg: linear-gradient(135deg, #1A1A1A 0%, #303030 100%);
  }

  .synopsis-container {
    color: var(--light);
    font-family: 'Poppins', sans-serif;
    position: relative;
    overflow-x: hidden;
  }

  /* Floating Ghost Effect */
  .floating-ghost-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 1;
    overflow: hidden;
  }

  .ghost {
    position: absolute;
    /* Fix 1: Updated image path with correct base URL */
    background-image: url('/living-with-the-ghost-of-sam/images/GhostSpirit.jpg');
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    opacity: 0.15;
    filter: blur(1px);
    mix-blend-mode: screen;
    pointer-events: none;
  }

  /* Fix 2: Add background color as fallback in case image doesn't load */
  .ghost-1, .ghost-2, .ghost-3 {
    background-color: rgba(255, 255, 255, 0.2);
  }

  .ghost-1 {
    width: 200px;
    height: 250px;
    top: 15%;
    left: -100px;
    animation: floatGhost1 90s linear infinite;
  }

  .ghost-2 {
    width: 150px;
    height: 180px;
    top: 45%;
    right: -150px;
    opacity: 0.12;
    animation: floatGhost2 120s linear infinite;
  }

  .ghost-3 {
    width: 180px;
    height: 220px;
    bottom: 10%;
    left: 50%;
    opacity: 0.08;
    filter: blur(2px);
    animation: floatGhost3 150s linear infinite;
  }

  /* Rest of the styles remain the same */
  /* ... */

  /* Fix 3: Updated Sam's image path */
  .sam {
    background-image: url('/living-with-the-ghost-of-sam/images/SamImagesmall.jpg');
    background-color: #444; /* Fallback */
  }

  /* Fix 4: Set debug borders to check if elements are rendering */
  .ghost {
    border: 1px dashed rgba(255, 255, 255, 0.1); /* Very subtle debug border */
  }

  /* Additional fix: ensure layer-1 has correct image path */
  .layer-1 {
    background-image: url('/living-with-the-ghost-of-sam/images/SamImage.jpg');
    opacity: 0.15;
    filter: blur(0px) contrast(1.2);
    transform: translateZ(-10px) scale(2);
  }
</style>

<script>
  // Script to check if images are loading correctly
  document.addEventListener('DOMContentLoaded', () => {
    // Debug function to check if images are loading
    function checkImageLoading() {
      console.log("Checking ghost images...");
      
      // List of background images to check
      const imageElements = [
        { selector: '.ghost', url: '/living-with-the-ghost-of-sam/images/GhostSpirit.jpg' },
        { selector: '.sam', url: '/living-with-the-ghost-of-sam/images/SamImagesmall.jpg' },
        { selector: '.layer-1', url: '/living-with-the-ghost-of-sam/images/SamImage.jpg' }
      ];
      
      imageElements.forEach(item => {
        const testImg = new Image();
        testImg.onload = () => console.log(`Image loaded successfully: ${item.url}`);
        testImg.onerror = () => {
          console.error(`Image failed to load: ${item.url}`);
          // Add visible fallback styling when image fails
          document.querySelectorAll(item.selector).forEach(el => {
            el.style.backgroundColor = 'rgba(255, 255, 255, 0.2)';
            el.style.border = '2px solid rgba(0, 229, 255, 0.5)'; // Use accent color
          });
        };
        testImg.src = item.url;
      });
    }
    
    // Run the check after a brief delay to ensure page is fully loaded
    setTimeout(checkImageLoading, 1000);
    
    // Rest of your existing script...
  });
</script>
